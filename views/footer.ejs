<!--subscribe-address-->
<section class="subscribe">
        <div class="container-fluid">
        <div class="row">
           <div class="col-lg-6 col-md-6 map-info-right px-0">
              
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.6293861881068!2d106.68324552307115!3d10.763019658532825!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752f1953a6e961%3A0xc77e334f1510b975!2zxJDhuqFpIGjhu41jIEtob2EgaOG7jWMgVOG7sSBuaGnDqm4!5e0!3m2!1svi!2s!4v1575019235176!5m2!1svi!2s"></iframe>
           </div>
           <div class="col-lg-6 col-md-6 address-w3l-right text-center">
              <div class="address-gried ">
                 <span class="far fa-map"></span>
                 <p>227 Đường Nguyễn Văn Cừ, Phường 4, Quận 5, Hồ Chí Minh<br>Việt Nam
                 <p>
              </div>
              <div class="address-gried mt-3">
                 <span class="fas fa-phone-volume"></span>
                 <p> 028 6288 4499</p>
              </div>
              <div class="address-gried mt-3">
                 <span class="far fa-envelope"></span>
                 <p><a href="mailto:kianto@gmail.com">kianto@gmail.com</a>
                    <br><a href="mailto:lychinhky@gmail.com">lychinhky@gmail.com</a>
                 </p>
              </div>
           </div>
        </div>
      </div>
     </section>
     <!--//subscribe-address-->
  <!--//Product-about-->
  
  <section class="sub-below-address py-lg-4 py-md-3 py-sm-3 py-3">
     <div class="container py-lg-5 py-md-5 py-sm-4 py-3">
        <h3 class="title clr text-center mb-lg-5 mb-md-4 mb-sm-4 mb-3">Liên Lạc Với Chúng Tôi</h3>
        <div class="icons mt-4 text-center">
           <ul>
              <li><a href="#"><span class="fab fa-facebook-f"></span></a></li>
              <li><a href="#"><span class="fas fa-envelope"></span></a></li>
              <li><a href="#"><span class="fas fa-rss"></span></a></li>
              <li><a href="#"><span class="fab fa-vk"></span></a></li>
           </ul>
           <p class="my-3">Godeam chuyên bán những món đồ chơi. Kích thích sự sáng tạo
              & ham học hỏi của người sở hữu món đồ chơi đó. Liên hệ Godeam qua Facebook , Email ở trên.

           </p>
        </div>
        <div class="email-sub-agile">
           <form action="#" method="post">
              <div class="form-group sub-info-mail">
                 <input type="email" name="email" class="form-control email-sub-agile" placeholder="Email">
              </div>
              <div class="text-center">
                 <button type="submit" class="btn subscrib-btnn">Đăng ký</button>
              </div>
           </form>
        </div>
     </div>
  </section>
  <!--//subscribe-->
  <!-- footer -->
  <footer class="py-lg-4 py-md-3 py-sm-3 py-3 text-center">
     <div class="copy-agile-right">
        <p> 
           © 2019 Toys-Shop. All Rights Reserved | Design by Godeam
        </p>
     </div>
  </footer>
  <!-- //footer -->
  <!-- Modal 1-->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Đăng Nhập</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <div class="register-form">
               <form id='login-form' action="/login" method="post">
                  <div class="fields-grid">
                     <div class="styled-input">
                        <input type="email" placeholder="Email tài khoản" name="email" required="">
                     </div>
                     <div class="styled-input">
                        <input type="password" placeholder="Mật khẩu" name="password" required="">
                     </div>
                     <div style="margin-bottom: 20px;">
                        <p data-toggle="modal" data-target="#exampleModal_forgot" class="forgot_pass">Quên mật khẩu?</p>
                        <P data-toggle="modal" data-target="#exampleModal_register" class="register_account">Tạo tài khoản mới</P>
                     </div>
                     <p id='login-error-message' style="color: red;"></p>
                     <button type="submit" class="btn subscrib-btnn">Đăng Nhập</button>
                  </div>
               </form>
            </div>
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
         </div>
      </div>
   </div>
</div>
<!-- //Modal 1-->
<!-- Modal Forgot-->
<div class="modal fade" id="exampleModal_forgot" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
 <div class="modal-dialog" role="document">
    <div class="modal-content">
       <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Quên Mật Khẩu</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
          </button>
       </div>
       <div class="modal-body">
          <div class="register-form">
             <form id='forgot-form' action="/forgotPassword" method="post">
                <div class="fields-grid">
                   <div class="styled-input">
                      <input type="email" placeholder="Email tài khoản" name="email" required="">
                   </div>
                   <p id='forgot-error-message' style="color: red;"></p>
                   <button type="submit" class="btn subscrib-btnn">Lấy mật khẩu</button>
                </div>
             </form>
          </div>
       </div>
       <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
       </div>
    </div>
 </div>
</div>
<!-- //Modal Forgot-->
<!-- Modal Register-->
<div class="modal fade" id="exampleModal_register" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
 <div class="modal-dialog" role="document">
    <div class="modal-content">
       <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Đăng ký</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
          </button>
       </div>
       <div class="modal-body">
          <div class="register-form">
             <form id='register-form' action="/register" method="post">
                <div class="fields-grid">
                   <div class="styled-input">
                      <input type="text" placeholder="Tên của bạn" name="name" required="">
                   </div>
                   <div class="styled-input">
                      <input id='register-email' type="email" placeholder="Email tài khoản" name="email" required="">
                   </div>
                   <div class="styled-input">
                      <input id='register-pass' type="password" placeholder="Mật khẩu" name="password" required="">
                   </div>
                   <div class="styled-input">
                     <input id='register-repass' type="password" placeholder="Nhập lại mật khẩu" name="repassword" required="">
                  </div>
                  <p id='register-error-message' style="color: red;"></p>
                  <button id='register-btn' type="submit" class="btn subscrib-btnn">Đăng ký</button>
                </div>
             </form>
          </div>
       </div>
       <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
       </div>
    </div>
 </div>
</div>
<!-- //Modal Register-->
<% if (user) { %>
<!-- Modal Info-->
<div class="modal fade" id="exampleModal_info" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Thông tin tài khoản</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
          
         <div class="modal-body">
            <form id='changeinfo-form' action="/changeInfo" method="post">
               <div class="row">  
                  <div class="col-sm-6 col-md-6">  
                    <div class="form-group">  
                      <label for="Name">Tên</label>  
                      <input id='info-name' class="form-control" name="name" type="text" readonly='' value="<%= user.name %>">
                    </div>  
                    <div class="form-group">  
                      <label for="Email">Email</label>  
                      <input id='info-email' class="form-control" name="email" type="email" readonly='' value="<%= user.email %>"> 
                    </div>  
                    <div class="form-group">  
                      <label for="Phone">Số điện thoại</label>  
                      <input id='info-phone' class="form-control" name="phone" type="text" readonly='' value="<%= user.phone %>">
                    </div>  
                    <div class="form-group">  
                      <label for="Address">Địa chỉ</label>  
                      <input id='info-address' class="form-control" name="address" type="text" readonly='' value="<%= user.address %>">
                    </div>  
                  </div>  
               </div>
               <div id='info-buttons' style="visibility: collapse;">
                  <p id='changeinfo-error-message' style="color: red;"></p>
                  <button id='info-change-btn' type="submit" class="btn btn-primary">  
                     Thay đổi
                  </button>
                  <button id='info-cancel-btn' class="btn btn-secondary" style="margin-left: 50px;">  
                     Hủy bỏ
                  </button>
               </div>
            </form>
            <hr>
            <div id='option-buttons'>
               <button id='change-btn' class="btn btn-primary">  
                  Chỉnh sửa thông tin  
               </button>
               <hr>
               <button class="btn btn-primary" data-toggle="modal" data-target="#exampleModal_ChangePass">  
                  Đổi Mật Khẩu
               </button> 
               <hr>
               <button id='logout-btn' class="btn btn-primary">  
                  Đăng xuất
               </button>
            </div>
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">
               Đóng</button>
         </div>
      </div>
   </div>
</div>
<!-- //Modal 2-->
<!-- Modal Change_pass-->
<div class="modal fade" id="exampleModal_ChangePass" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Thay Đổi Mật Khẩu</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
         </div>
         <div class="modal-body">
            <div class="register-form">
               <form id='changepass-form' action="/changePassword" method="post">
                  <div class="fields-grid">
                     <div class="styled-input">
                        <input id='changepass-pass' type="password" placeholder="Nhập mật khẩu mới" name="password" required="">
                     </div>
                     <div class="styled-input">
                        <input id='changepass-repass' type="password" placeholder="Nhập lại mật khẩu mới" name="repassword" required="">
                     </div>
                     <p id='changepass-error-message' style="color: red;"></p>
                     <button id='changepass-btn' type="submit" class="btn subscrib-btnn">Đổi Mật Khẩu</button>
                  </div>
               </form>
            </div>
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
         </div>
      </div>
   </div>
</div>
<!-- //Modal Register-->
<% } %>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/auth-ajax.js"></script>
<script src="/javascripts/order-ajax.js"></script>
<% if (user) { %>
<script>
$('#info-email').keyup(function() {
    $.getJSON('/checkEmailExisting?email='+$('#info-email').val(), function (data){
      if (data && $('#info-email').val() !== '<%= user.email %>') {
        $('#changeinfo-error-message').html('Email này đã được đăng ký.');
        $('#info-change-btn').attr('disabled', true);
        $('#info-change-btn').css('text-decoration', 'line-through');
      } else {
        $('#changeinfo-error-message').html('');
        $('#info-change-btn').attr('disabled', false);
        $('#info-change-btn').css('text-decoration', 'none');
      }
    })
});
$('#change-btn').click(function() {
    $('#option-buttons').css('visibility', 'collapse');
    $('#info-buttons').css('visibility', 'visible');
    $('#info-name').removeAttr('readonly');
    $('#info-email').removeAttr('readonly');
    $('#info-phone').removeAttr('readonly');
    $('#info-address').removeAttr('readonly');
});
$('#info-cancel-btn').click(function(e) {
    e.preventDefault();
    $('#option-buttons').css('visibility', 'visible');
    $('#info-buttons').css('visibility', 'collapse');
    $('#info-name').attr('readonly', 'readonly');
    $('#info-email').attr('readonly', 'readonly');
    $('#info-phone').attr('readonly', 'readonly');
    $('#info-address').attr('readonly', 'readonly');
    $('#info-name').val('<%= user.name %>');
    $('#info-email').val('<%= user.email %>');
    $('#info-phone').val('<%= user.phone %>');
    $('#info-address').val('<%= user.address %>');
    return false;
});
</script>
<% } %>
